(function(e){function t(t){for(var r,i,c=t[0],s=t[1],d=t[2],u=0,v=[];u<c.length;u++)i=c[u],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&v.push(n[i][0]),n[i]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);l&&l(t);while(v.length)v.shift()();return o.push.apply(o,d||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],r=!0,c=1;c<a.length;c++){var s=a[c];0!==n[s]&&(r=!1)}r&&(o.splice(t--,1),e=i(i.s=a[0]))}return e}var r={},n={app:0},o=[];function i(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=r,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(a,r,function(t){return e[t]}.bind(null,r));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var d=0;d<c.length;d++)t(c[d]);var l=s;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";a("f0a0")},"56d7":function(e,t,a){"use strict";a.r(t);a("ba06"),a("b195"),a("0e18"),a("af72");var r=a("a593"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"scanner"}},[e._m(0),a("video",{ref:"video",staticClass:"video-view",attrs:{autoplay:"",playsinline:"true","webkit-playsinline":"true"}}),a("canvas",{ref:"canvas",staticStyle:{display:"none"},attrs:{width:"478",height:"850"}})])},o=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"model"},[a("div",{staticClass:"scanner-view"},[a("div",{staticClass:"scanner-view-arrow arrow1"}),a("div",{staticClass:"scanner-view-arrow arrow2"}),a("div",{staticClass:"scanner-view-arrow arrow3"}),a("div",{staticClass:"scanner-view-arrow arrow4"}),a("div",{staticClass:"scanner-line"})])])}],i=(a("0a09"),a("b4c0")),c=a.n(i),s=a("1e4b"),d=a.n(s),l={name:"",data:function(){return{cameraWidth:0,cameraHeight:0}},methods:{initVideo:function(e){var t=this;navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia(e).then(t.videoSuccess).catch(t.videoError):navigator.webkitGetUserMedia?navigator.webkitGetUserMedia(e).then(t.videoSuccess).catch(t.videoError):navigator.mozGetUserMedia?navagator.mozGetUserMedia(e).then(t.videoSuccess).catch(t.videoError):navigator.getUserMedia&&navigator.getUserMedia(e).then(t.videoSuccess).catch(t.videoError)},videoSuccess:function(e){var t=this.$refs.video,a=this;t.srcObject=e,t.play(),t.oncanplay=function(){console.log("摄像头分辨率"),console.log(t.videoWidth,t.videoHeight),a.cameraWidth=t.videoWidth,a.cameraHeight=t.videoHeight,a.readImg()}},videoError:function(e){console.log("访问用户媒体设备失败：",e.name,e.message)},readImg:function(){var e=this.$refs.video,t=this.$refs.canvas,a=t.getContext("2d"),r=this,n=setInterval((function(){a.drawImage(e,0,0,r.cameraWidth,r.cameraHeight,0,0,478,850);var o=t.toDataURL();r.readBarcode(o,n);var i=a.getImageData(0,0,478,850);r.readQrcode(i.data,n)}),1e3)},readBarcode:function(e,t){var a=this;d.a.decodeSingle({inputStream:{size:1920},locator:{patchSize:"medium",halfSample:!1},decoder:{readers:[{format:"code_128_reader",config:{}}]},locate:!0,src:e},(function(e){e&&e.codeResult?(console.log(e.codeResult),clearInterval(t),a.$emit("ondata",e.codeResult.code),alert("扫码成功，结果是..."+e.codeResult.code)):console.log("正在扫条形码...not detected")}))},readQrcode:function(e,t){var a=this,r=c()(e,478,850,{inversionAttempts:"dontInvert"});r?(clearInterval(t),a.$emit("ondata",r.data),alert("扫码成功，结果是..."+r.data)):console.log("正在扫二维码...")}},mounted:function(){console.log(navigator,"show navigator"),navigator.mediaDevices&&navigator.mediaDevices.getUserMedia||navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia?this.initVideo({video:{height:800,facingMode:{exact:"environment"}}}):alert("你的浏览器不支持访问用户媒体设备")}},u=l,v=(a("034f"),a("5d22")),f=Object(v["a"])(u,n,o,!1,null,null,null),g=f.exports,h=a("52fb"),p=a.n(h);r["a"].config.productionTip=!1;new p.a;console.log("Hello world"),new r["a"]({render:function(e){return e(g)}}).$mount("#app")},f0a0:function(e,t,a){}});
//# sourceMappingURL=app.8bb3265c.js.map